"use strict";(self["webpackChunkgiligili"]=self["webpackChunkgiligili"]||[]).push([[495],{9495:function(e,r,t){t.r(r),t.d(r,{default:function(){return f}});var s=function(){var e=this,r=e._self._c;return r("div",[r("h1",{staticStyle:{"text-align":"center"}},[e._v("注册")]),r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","status-icon":"",rules:e.rules,"hide-required-asterisk":""}},[r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.nickname,callback:function(r){e.$set(e.form,"nickname",r)},expression:"form.nickname"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password_confirm"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password_confirm,callback:function(r){e.$set(e.form,"password_confirm",r)},expression:"form.password_confirm"}})],1),r("el-form-item",[r("el-button",{attrs:{id:"button",type:"primary"},on:{click:function(r){return e.register()}}},[e._v("注册")]),r("el-button",{on:{click:function(r){return e.resetForm()}}},[e._v("重置")]),r("el-button",{on:{click:function(r){return e.toLoginPage()}}},[e._v("去登陆")])],1)],1)],1)},o=[],n=(t(7658),t(2900)),i=t(6369),a={data(){var e=(e,r,t)=>{""===r?t(new Error("请输入密码")):(""!==this.form.password_confirm&&this.$refs.form.validateField("checkPass"),t())},r=(e,r,t)=>{""===r?t(new Error("请再次输入密码")):r!==this.form.password?t(new Error("两次密码输入不一致")):t()};return{form:{nickname:"",username:"",password:"",password_confirm:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:30,message:"长度在 5 到 30 个字符",trigger:"blur"}],password:[{validator:e,trigger:"blur"},{min:8,max:40,message:"长度在 8 到 40 个字符",trigger:"blur"}],password_confirm:[{validator:r,trigger:"blur"},{min:8,max:40,message:"长度在 8 到 40 个字符",trigger:"blur"}]}}},methods:{register(){this.$refs["form"].validate((e=>{if(e){let e=document.getElementById("button");e.disabled=!0;let r=e.innerHTML;e.innerHTML="注册中...",n.z2(this.form).then((t=>{if(0===t.code){let e=`您的用户id为${t.data.id}`;i.a_()?(this.$router.push("/me"),e+="；你已登陆，若想登陆新账号请先登出"):this.$router.push("/login"),this.$notify({title:"注册成功",message:e,type:"success",showClose:!1})}else this.$notify.error({title:"注册失败",message:t.msg,showClose:!1}),e.disabled=!1,e.innerHTML=r})).catch((t=>{this.$notify.error({title:"注册失败",message:t,showClose:!1}),e.disabled=!1,e.innerHTML=r}))}else this.$notify.error({title:"注册失败",message:"填入信息有误",showClose:!1})}))},resetForm(){this.$refs["form"].resetFields()},toLoginPage(){this.$router.push("/login")}}},l=a,u=t(1001),m=(0,u.Z)(l,s,o,!1,null,null,null),f=m.exports},2900:function(e,r,t){t.d(r,{Gz:function(){return l},PR:function(){return a},gQ:function(){return m},gg:function(){return f},me:function(){return i},tb:function(){return u},x4:function(){return n},z2:function(){return o}});var s=t(196);const o=e=>s.Z.post("/api/v1/register",e).then((e=>e.data)),n=e=>s.Z.post("/api/v1/login",e).then((e=>e.data)),i=()=>s.Z.get("/api/v1/me").then((e=>e.data)),a=e=>s.Z.get(`/api/v1/user/${e}`).then((e=>e.data)),l=e=>s.Z.put("/api/v1/user/nickname",e).then((e=>e.data)),u=e=>s.Z.put("/api/v1/user/signature",e).then((e=>e.data)),m=e=>s.Z.put("/api/v1/user/password",e).then((e=>e.data)),f=e=>s.Z.post("/api/v1/user/avatar",e).then((e=>e.data))}}]);
//# sourceMappingURL=495.81e5f9ea.js.map